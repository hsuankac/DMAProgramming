#include <stdint.h>
#include "stm32f446xx.h"

void button_init(void);
void uart2_init(void);
void dma1_init(void);


int main(void)
{
	button_init();
	uart2_init();
	dma1_init();
	return 0;

}

void button_init(void)
{
	// Button is connected to PC 13
	GPIO_TypeDef *pGPIOC = GPIOC;
	RCC_TypeDef *pRCC = RCC;
	EXTI_TypeDef *pEXTI = EXTI;
	SYSCFG_TypeDef *pSYSCFG = SYSCFG;

	// 1. Enable the peripheral clock for the GPIOC peripheral
	pRCC->AHB1ENR |= (1 << 2);

	// 2. Keep the GPIO pin in input modes
	pGPIOC->MODER &= ~(0x3 << 26);

	// 3. Configure the edge detection on that GPIO pin
	pEXTI->FTSR |= (1 << 13);

	// 4. Enable the interrupt over that GPIO pin
	pEXTI->IMR |= (1 << 13);

	// 5. Enable the IRQ related to that GPIO pin in NVIC of the processor
	NVIC_EnableIRQ(EXTI15_10_IRQn);

	// 6. Configuring the SYSCFG control register
	pSYSCFG->EXTICR[3] &= ~(0xf << 4);

}


void uart2_init(void)
{

}


void dma1_init(void)
{

}

